{% extends 'layouts/default.html' %}

{% block content %}

	<section class="section-container">
		{% for websiteTag in model_relation(post, 'websiteTags') | slice(0,1) %}
		{% include 'components/breadcrumb.html' with { page: websiteTag.name, link: link_to(websiteTag) , title: post.title} %}
		{% endfor %}
		<!-- 	Content	 -->
		<div class="post-container">
			<div class="post-wrapper">
				<h1 class="post-title">
					{{post.title}}
				</h1>
				<p class="post-info">
					{% for websiteTag in model_relation(post, 'websiteTags')%}
					<a href="{{ link_to(websiteTag) }}"><span class="post-tag">{{ websiteTag.name }}</span></a>
					{% endfor %} |
					<span class="post-date">{{ post.created_at | date("j F Y") }}</span>
				</p>
				<div class="post-content">
					{% set thumbnailFile = model_relation(post, 'thumbnailFile') %}
					{% if thumbnailFile %}
					<img class="post-image" src="{{ image_url(thumbnailFile) }}" alt="{{ post.title }}">
					{% endif %}
					<div class="post-content-wrapper">
						{% for content in model_relation(post, 'contents') %}
						<p>
							{{content.content | raw}}
						</p>
						{% endfor %}
					</div>
				</div>
			</div>

			<div class="post-wrapper-1">
				<div>
					<h1 class="post-title-1">Share this post</h1>
					<ul class="post-social-container">
						<li>
							<svg class="post-social-icon" fill="currentColor" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 24 24">
								<path d="M 2.3671875 3 L 9.4628906 13.140625 L 2.7402344 21 L 5.3808594 21 L 10.644531 14.830078 L 14.960938 21 L 21.871094 21 L 14.449219 10.375 L 20.740234 3 L 18.140625 3 L 13.271484 8.6875 L 9.2988281 3 L 2.3671875 3 z M 6.2070312 5 L 8.2558594 5 L 18.033203 19 L 16.001953 19 L 6.2070312 5 z"></path>
							</svg>
						</li>

						<li>
							<svg class="post-social-icon" fill="currentColor" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 50 50">
								<path d="M25,3C12.85,3,3,12.85,3,25c0,11.03,8.125,20.137,18.712,21.728V30.831h-5.443v-5.783h5.443v-3.848 c0-6.371,3.104-9.168,8.399-9.168c2.536,0,3.877,0.188,4.512,0.274v5.048h-3.612c-2.248,0-3.033,2.131-3.033,4.533v3.161h6.588 l-0.894,5.783h-5.694v15.944C38.716,45.318,47,36.137,47,25C47,12.85,37.15,3,25,3z"></path>
							</svg>
						</li>

						<li>
							<svg class="post-social-icon" fill="currentColor" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 50 50">
								<path d="M25,2c12.703,0,23,10.297,23,23S37.703,48,25,48S2,37.703,2,25S12.297,2,25,2z M32.934,34.375	c0.423-1.298,2.405-14.234,2.65-16.783c0.074-0.772-0.17-1.285-0.648-1.514c-0.578-0.278-1.434-0.139-2.427,0.219	c-1.362,0.491-18.774,7.884-19.78,8.312c-0.954,0.405-1.856,0.847-1.856,1.487c0,0.45,0.267,0.703,1.003,0.966	c0.766,0.273,2.695,0.858,3.834,1.172c1.097,0.303,2.346,0.04,3.046-0.395c0.742-0.461,9.305-6.191,9.92-6.693	c0.614-0.502,1.104,0.141,0.602,0.644c-0.502,0.502-6.38,6.207-7.155,6.997c-0.941,0.959-0.273,1.953,0.358,2.351	c0.721,0.454,5.906,3.932,6.687,4.49c0.781,0.558,1.573,0.811,2.298,0.811C32.191,36.439,32.573,35.484,32.934,34.375z"></path>
							</svg>
						</li>

						<li>
							<svg class="post-social-icon" fill="currentColor" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 64 64">
								<path d="M 51 2 A 5 5 0 0 0 46.849609 4.2207031 L 36.353516 2.3320312 L 34.636719 2.0214844 L 34.0625 3.8066406 L 29.138672 19.117188 C 22.50601 19.63419 16.640194 21.931493 12.466797 25.316406 A 6.5 6.5 0 0 0 7.5 23 A 6.5 6.5 0 0 0 6.109375 35.841797 C 6.0411703 36.388219 6 36.94093 6 37.5 C 6 47.72 17.64 56 32 56 C 46.36 56 58 47.72 58 37.5 C 58 36.942242 57.958513 36.390874 57.890625 35.845703 A 6.5 6.5 0 0 0 56.5 23 A 6.5 6.5 0 0 0 51.533203 25.316406 C 47.433265 21.991073 41.696699 19.72336 35.207031 19.154297 L 37.591797 6.6171875 L 46.136719 8.15625 A 5 5 0 0 0 51 12 A 5 5 0 0 0 51 2 z M 21.150391 29 C 23.830391 29 26 31.24 26 34 C 26 36.76 23.830391 39 21.150391 39 C 18.480391 39.06 16.300781 36.76 16.300781 34 C 16.300781 31.24 18.480391 29 21.150391 29 z M 42.849609 29 C 45.519609 29 47.699219 31.24 47.699219 34 C 47.699219 36.76 45.519609 39.06 42.849609 39 C 40.169609 39 38 36.76 38 34 C 38 31.24 40.169609 29 42.849609 29 z M 22.199219 43.400391 C 22.229219 43.420391 25.83 46.400391 32 46.400391 C 38.17 46.400391 42.110625 43.859844 42.140625 43.839844 L 44.199219 46.599609 C 44.009219 46.739609 39.58 50 32 50 C 24.42 50 19.990781 46.739609 19.800781 46.599609 L 22.199219 43.400391 z"></path>
							</svg>
						</li>

						<li>
							<svg class="post-social-icon" fill="currentColor" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 50 50">
								<path d="M41,4H9C6.24,4,4,6.24,4,9v32c0,2.76,2.24,5,5,5h32c2.76,0,5-2.24,5-5V9C46,6.24,43.76,4,41,4z M37.72,33l-3.73-0.01 c0,0-0.08,0.01-0.21,0.01c-0.3,0-0.92-0.08-1.65-0.58c-1.31-0.91-2.56-3.17-3.55-3.17c-0.07,0-0.13,0.01-0.19,0.03 c-0.86,0.27-1.12,1.13-1.12,2.18c0,0.37-0.26,0.54-0.96,0.54h-1.93c-2.16,0-4.25-0.05-6.6-2.62c-3.46-3.79-6.7-10.53-6.7-10.53 s-0.18-0.39,0.01-0.62c0.18-0.21,0.6-0.23,0.76-0.23c0.04,0,0.06,0,0.06,0h4c0,0,0.37,0.07,0.64,0.27c0.23,0.17,0.35,0.48,0.35,0.48 s0.68,1.32,1.53,2.81c1.43,2.46,2.2,3.28,2.75,3.28c0.09,0,0.18-0.02,0.27-0.07c0.82-0.45,0.58-4.09,0.58-4.09s0.01-1.32-0.42-1.9 c-0.33-0.46-0.96-0.59-1.24-0.63c-0.22-0.03,0.14-0.55,0.62-0.79c0.62-0.3,1.65-0.36,2.89-0.36h0.6c1.17,0.02,1.2,0.14,1.66,0.25 c1.38,0.33,0.91,1.62,0.91,4.71c0,0.99-0.18,2.38,0.53,2.85c0.05,0.03,0.12,0.05,0.21,0.05c0.46,0,1.45-0.59,3.03-3.26 c0.88-1.52,1.56-3.03,1.56-3.03s0.15-0.27,0.38-0.41c0.22-0.13,0.22-0.13,0.51-0.13h0.03c0.32,0,3.5-0.03,4.2-0.03h0.08 c0.67,0,1.28,0.01,1.39,0.42c0.16,0.62-0.49,1.73-2.2,4.03c-2.82,3.77-3.14,3.49-0.8,5.67c2.24,2.08,2.7,3.09,2.78,3.22 C39.68,32.88,37.72,33,37.72,33z"></path>
							</svg>
						</li>

						<li>
							<svg class="post-social-icon" fill="currentColor" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 50 50">
								<path d="M 16 3 C 8.8324839 3 3 8.8324839 3 16 L 3 34 C 3 41.167516 8.8324839 47 16 47 L 34 47 C 41.167516 47 47 41.167516 47 34 L 47 16 C 47 8.8324839 41.167516 3 34 3 L 16 3 z M 16 5 L 34 5 C 40.086484 5 45 9.9135161 45 16 L 45 34 C 45 40.086484 40.086484 45 34 45 L 16 45 C 9.9135161 45 5 40.086484 5 34 L 5 16 C 5 9.9135161 9.9135161 5 16 5 z M 37 11 A 2 2 0 0 0 35 13 A 2 2 0 0 0 37 15 A 2 2 0 0 0 39 13 A 2 2 0 0 0 37 11 z M 25 14 C 18.936712 14 14 18.936712 14 25 C 14 31.063288 18.936712 36 25 36 C 31.063288 36 36 31.063288 36 25 C 36 18.936712 31.063288 14 25 14 z M 25 16 C 29.982407 16 34 20.017593 34 25 C 34 29.982407 29.982407 34 25 34 C 20.017593 34 16 29.982407 16 25 C 16 20.017593 20.017593 16 25 16 z"></path>
							</svg>
						</li>
					</ul>
					<div class="post-like-container">
						<svg class="post-like-icon" width="100" height="100" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							<path d="M18 2H6C4.34 2 3 3.33 3 4.97V15.88C3 17.52 4.34 18.85 6 18.85H6.76C7.56 18.85 8.32 19.16 8.88 19.72L10.59 21.41C11.37 22.18 12.64 22.18 13.42 21.41L15.13 19.72C15.69 19.16 16.46 18.85 17.25 18.85H18C19.66 18.85 21 17.52 21 15.88V4.97C21 3.33 19.66 2 18 2ZM16.68 10.5L15.51 14.06C15.36 14.65 14.73 15.13 14.09 15.13H12.24C11.92 15.13 11.47 15.02 11.27 14.82L9.8 13.67C9.77 14.31 9.48 14.58 8.77 14.58H8.29C7.55 14.58 7.25 14.29 7.25 13.59V8.82C7.25 8.12 7.55 7.83 8.29 7.83H8.78C9.52 7.83 9.82 8.12 9.82 8.82V9.18L11.76 6.3C11.96 5.99 12.47 5.77 12.9 5.94C13.37 6.1 13.67 6.62 13.57 7.08L13.33 8.64C13.3 8.77 13.33 8.91 13.42 9C13.5 9.09 13.62 9.15 13.75 9.15H15.7C16.08 9.15 16.4 9.3 16.59 9.57C16.77 9.83 16.8 10.16 16.68 10.5Z" fill="currentColor"/>
						</svg>

						<p class="post-like-text">1.2k</p>
					</div>
				</div>

				<div x-data="list('/ajax/suggestions/{{ post.slug }}', true, 4)">
					<h1 class="post-title-2">For Further Reference</h1>
					<div class="card-container-9" >
						<template x-for="post in data">
						<a class="card-wrapper-6" href="">
							<img class="card-image-4" :src="post.thumbnail_file_url || '{{ link_asset('images/default.png') }}'" alt="Image">

							<div class="card-info-2">
								<div class="card-content-2">
									<h3 class="card-title-5" x-text="post.title"></h3>
									<p class="card-description-2" x-text="post.description"></p>
								</div>

								<p class="card-date-1">
									<svg class="card-date-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
										<path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
									</svg>
									<span x-text="formatDate(post.created_at)"></span>
								</p>
							</div>
						</a>
						</template>
					</div>
					<div class="text-center my-10">
						<div x-show="isLoading">
							{% include 'components/loading.html'%}
						</div>
						<button x-bind="trigger" class="btn-view-more">View More</button>
					</div>
				</div>
			</div>
		</div>
		<!-- 	End Content -->
	</section>

<script>
    document.addEventListener('DOMContentLoaded', () => window.viewCount('{{ post.slug }}'))
</script>

<script type="module">
    import { formatDate } from '{{ link_asset('js/main.js') }}?t={{ time() }}';

    window.formatDate = formatDate;
</script>
{% endblock %}
